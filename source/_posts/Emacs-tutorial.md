title: Emacs基本操作
date: 2016-01-16 22:20:41
tags:
	- Emacs
categories:
	- Emacs

---
忍不住了，再次决定开始学习使用emacs，记录学习过程，而且打算写一系列博客，看看到底能玩成什么样。
以前看过emacs的tutorial，没有做笔记，只是做了一张思维导图，后面我会貼出来，
今天再次看一次tutorial，把基础操作记录一下，而且下决心，所有文本编辑任务使用
emacs完成，用来练习emacs。先说一下tutorial的打开方法把：
<!--more-->
```
emacs -nw -Q  #在terminal里面进入emacs
```
`M-x help-with-tutorial`
看英文版把，骚年，并不难。
## 预备
`C` 代表Ctrl键，`C-v`代表Ctrl和`v`一起按下
`M` 代表Meta键，通常是Alt键，用法同Ctrl
`C-g` 结束任何正在运行或者你好没输入完的命令，所以如果你不知道在什么状态下，就按一下这个吧

## 屏幕滚动
`C-v` : 向下滚动一页
`M-v` : 向上滚动一页
`C-l` : 将光标处的内容滚动到屏幕中间。again？屏幕顶部。again？屏幕底部。

## 光标移动
`C-p` ： 光标上移一行（previous）
`C-n` ： 光标下移一行（Next）
`C-b` ： 光标后退一个字符（backword）
`C-f` ： 光标前进一个字符（forward）
Meta 和 Ctrl 语义上的区别：
Meta多用于语言单元，比如词语、句子等
Ctrl多用于文本单元，比如字符、行等
`M-b` ： 后退一个词语
`M-f` ： 前进一个词语
`C-a` ： 光标移动到行首
`M-a` ： 光标移动到句首
`C-e` ： 光标移动到行尾
`M-e` ： 光标移动到句尾
`M-<` ： 光标移动到文件开头
`M->` ： 光标移动到文件末尾

## 给命令加参数
使用`C-u`，要给命令加上执行次数的参数可以使用`C-u [num] Command`
`C-u 8 C-b`代表光标向后退8个字符

## 关闭其他窗口
初学者容易误操作下打开多个窗口不知所措，所以tutorial里面特意先教会大家关闭其他窗口
`C-x 1`就是只保留当前聚焦的窗口

## Delete & Kill contents
Delete掉的字符是没有进入剪切板的，而kill掉的字符是被拉入剪切板的，kill掉的字符可以通过yanking操作来找回，而delete掉的字符只能通过撤销操作来找回
`<Del>` ： 也就是Backspace按键，删除光标前的一个字符
`C-d` ： 相当于Delete按键，删除光标后面的一个字符
`M-<Del>` ： 删除前一个单词
`M-d` ： 删除后一个单词
`C-k` ： 删除光标到行尾的内容
`M-k` ： 删除光标到句尾的内容
当delete涉及到多个字符时，那么将会变成kill。比如：
`C-u 8 C-d`将删除8个字符，这些被删除的字符将被拉入剪切板，此时的`C-d`变成了kill操作而非delete操作
`C-<Space>` ： 允许选中一段内容，然后删除

`C-y` ： 在光标后粘贴最后kill掉的内容
`M-y` ： 该命令要在`C-y`后面使用，它允许你选择你前面kill下来的内容，而不是最近一次kill掉的内容

## 撤销（undo）
`C-/` or `C-_` or `C-x u` 效果一毛一样，都是撤销内容的修改，对于光标移动或者屏幕滚动是不能被这些命令撤销的

## 文件操作
`C-x C-f [Path/to/file]` ： 打开一个文件
`C-x C-s` ： 保存文件
`C-x C-b` ： 查看打开的缓冲区
`C-x b [buffer name]` ： 切换当前缓冲区

## 扩展命令
emacs有两种风格：
- `C-x` 字符扩展命令，后面接一个字符
- `M-x` 名称扩展命令，后面接一个长名称

前面我们学过好几个扩展命令了，比如
`C-x C-f` ： 打开文件
`C-x C-s` ： 保存文件
`C-x s` ： 保存缓冲区
`C-x C-b` ： 列出缓冲区
`C-x b` ： 切换当前缓冲区
`C-x C-c` ：退出emacs
`C-x 1` ： 删除其他窗口除了当前缓存区窗口
`C-x u` ： 撤销
而`M-x`一般在特定的mode下使用，不同的mode可能有不同的命令，比较常用的命令是replace-string，在`M-x`下可以使用<Tab>补全（和各种shell类似，不罗嗦）

## 自动保存
emacs会定时保存文件，定时保存的文件将在文件名前后面加上`#`，如果正常退出，emacs会删除该临时文件。如果电脑crash了，可以通过这个文件恢复之前编辑的内容：
在打开这个文件以后输入`M-x recover-file`，如果需要确认，则输入`yes`，这样就能恢复你丢失的编辑数据。

## 模式（mode）
Emacs有很多模式可以使用，在emacs的倒数第二行有一个分割行，上面的字符类似这样
```
--:**- Tutorial 73% L842 (Fundamental)
```
其中（）中的内容就是模式名称，Emacs的模式分为主模式和辅模式，你可以在主模式之间切换，可以为主模式附加辅模式。
使用`M-x ModeName`来切换主模式或者开关辅助模式

## 搜索
搜索是增量搜索，意思是从你输入的第一个字符开始，emacs就开跳转到匹配的项上了
`C-s` ： 正向搜索
`C-r` ： 逆向搜索
多次按下`C-s`或者`C-r`进行搜索后，使用`<Del>`键是连续倒序退回到上一个位置，直到搜索开始的地方
`<Return>`结束搜索

## 多窗格（window）
此处的多窗格类似于tmux的多窗格，是在一个窗口中分裂屏幕
`C-x 2` ： 打开两个窗口，此时，两个窗口显示的内容是一样的
`C-M-v` ： 向下滚动未被选中的窗口（有用）
`C-x o` ： 焦点在窗口间移动（"o" for "other")

## 多窗口（frame）
multiple frames是很多其他应用中所说的多窗口，是实实在在的开一个窗口出来显示内容
`M-x make-frame` ： 新开一个窗口
`M-x delete-frame` ： 关闭当前的窗口
简单粗暴的点击“x”也是关闭一个窗口的方法
一个frame包含多个window，在字符终端中，只能同时显示一个frame，但是可以显示多个window，在图像界面下，frame和window都是可以显示多个的。

## 退出递归
使用`<ESC><ESC><ESC>`
`C-g`只是用于取消命令，不能退出递归

## 帮助
`C-h ?` ： Emacs将列出它能给你提供的帮助文档
`C-h c {character or sequence}` ：输出一个简要的介绍，多字符命令同样支持噢
`C-h k {character or sequence}` ：在一个新窗格中打开详细的帮助文档
`C-h f` ： 打开功能函数的文档
`C-h v` ： 打开变量的文档
`C-h a` ： 文档关键字查找（keyword)
`C-h i` ： 打开Info
`C-h r` ： Emacs 教材
